<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Data converter</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,600;0,700;1,400&display=swap" rel="stylesheet">

  </head>
  <body>
<div class="bloc-contenu">
 <div class="bloc-left">
  <div class="bloc-information">
  <h1>Top 10 Netflix <br> France</h1>
  <p>Source : https://top10.netflix.com/</p>
</div>
<img src="../img/netflix_logo.svg">
 </div>
 <div class="bloc-right">

  <div class="filtre">
    <div class="filtre_serie">
    <p>Séries</p>
  </div>
  <div class="filtre_tv">
    <p>Films</p>
  </div>
    
  </div>
</div>
</div>

     
    <pre></pre>

    <script>
      async function init() {
        // On va chercher les countries
        const response = await fetch("./all-week-countries.json");
        const countries = await response.json();

        // Cherchons l'autre jeu de données
        const response2 = await fetch("./all-week-globals.json");
        const weeks = await response2.json();

        const france = countries
          .filter((c) => c.country_name === "France")
          .map((c) => {
            delete c.country_iso2;
            delete c.cumulative_weeks_in_top_10;

            return c;
          })
          .map((c) => {
            const views = weeks.filter(
              (w) => w.show_title === c.show_title && w.week === c.week
            );
            c.views = views;
            return c;
          })
          .filter((c) => c.views.length > 0)
          .map((c) => {
            c.weekly_hours_viewed = c.views[0].weekly_hours_viewed;
            delete c.views;
            return c;
          });

        document.querySelector("pre").textContent = JSON.stringify(
          france,
          null,
          2
        );
      }

    

    // document.querySelector('.filter_tv').addEventListener("click", (function(e) {
    //     document.querySelector('.filter_serie').classList.remove('hidden');
    


    // }));


    // document.querySelector('.filter_serie').addEventListener("click", (function(e) {
    //     document.querySelector('.filter_tv').classList.add('hidden');
    // }));



      init();
    </script>
  </body>
</html>
